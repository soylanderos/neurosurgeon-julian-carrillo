<section class="relative overflow-hidden py-20 md:py-28" style="background: var(--proc-bg);">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-6xl mx-auto">
      <!-- Header -->
      <div class="max-w-2xl">
        <span
          class="inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-extrabold tracking-[0.18em] uppercase border"
          style="background: var(--proc-pill-bg); color: var(--proc-pill-text); border-color: var(--proc-card-border);"
        >
          <span class="h-2 w-2 rounded-full" style="background: var(--proc-pill-dot);"></span>
          Proceso de atención
        </span>

        <h2 class="mt-5 text-3xl md:text-4xl lg:text-5xl font-extrabold text-balance" style="color: var(--proc-title);">
          Un proceso simple,
          <span class="relative inline-block">
            sin vueltas
            <span class="absolute -bottom-2 left-0 right-0 h-2 rounded-full" style="background: var(--proc-underline);"></span>
          </span>
        </h2>

        <p class="mt-4 text-lg text-pretty" style="color: var(--proc-body);">
          Claridad desde la primera consulta hasta el seguimiento.
        </p>
      </div>

      <!-- MOBILE: vertical timeline -->
      <div class="mt-12 relative lg:hidden">
        <div class="absolute left-6 top-0 bottom-0 w-px" style="background: var(--proc-line);"></div>

        <div class="space-y-6">
          @for (step of processSteps; track trackByKey($index, step)) {
            <div class="relative pl-16">
              <!-- node -->
              <div class="absolute left-0 top-0">
                <div
                  class="h-12 w-12 rounded-2xl grid place-items-center border shadow-sm ring-4"
                  style="background: var(--proc-node-bg); border-color: var(--proc-node-border); ring-color: var(--proc-node-ring);"
                >
                  @switch (step.icon) { @case ('calendar') {
                    <lucide-icon [img]="iCalendar" class="h-6 w-6" style="color: var(--proc-icon);"></lucide-icon>
                  } @case ('clipboard') {
                    <lucide-icon [img]="iClipboard" class="h-6 w-6" style="color: var(--proc-icon);"></lucide-icon>
                  } @case ('stethoscope') {
                    <lucide-icon [img]="iStetho" class="h-6 w-6" style="color: var(--proc-icon);"></lucide-icon>
                  } @default {
                    <lucide-icon [img]="iFollow" class="h-6 w-6" style="color: var(--proc-icon);"></lucide-icon>
                  } }
                </div>

                <div class="mt-2 text-center">
                  <span
                    class="inline-flex rounded-full px-2 py-0.5 text-[11px] font-extrabold border"
                    style="background: var(--proc-step-badge-bg); color: var(--proc-step-badge-text); border-color: var(--proc-card-border);"
                  >
                    Paso {{ step.number }}
                  </span>
                </div>
              </div>

              <!-- card -->
              <article
                class="rounded-3xl border p-6 shadow-sm"
                style="background: var(--proc-card-bg); border-color: var(--proc-card-border);"
              >
                <p class="text-base font-extrabold" style="color: var(--proc-title);">
                  {{ step.title }}
                </p>
                <p class="mt-2 text-sm leading-relaxed" style="color: var(--proc-body);">
                  {{ step.description }}
                </p>

                <div class="mt-5 flex items-center justify-between gap-3">
                  <span
                    class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-extrabold border"
                    style="background: var(--proc-chip-bg); color: var(--proc-title); border-color: var(--proc-card-border);"
                  >
                    <span class="h-2 w-2 rounded-full" style="background: var(--proc-chip-dot);"></span>
                    Atención clara
                  </span>

                  <span class="h-2 w-2 rounded-full" style="background: var(--proc-accent-dot);"></span>
                </div>
              </article>
            </div>
          }
        </div>
      </div>

      <!-- DESKTOP: horizontal stepper (icon row + card row) -->
      <div class="mt-14 hidden lg:block">
        <div class="proc-stepper">
          @for (step of processSteps; track trackByKey($index, step)) {
            <div class="proc-step">
              <!-- top: node + connector -->
              <div class="proc-nodeWrap">
                <div
                  class="proc-node h-12 w-12 rounded-2xl grid place-items-center border shadow-sm ring-4"
                  style="background: var(--proc-node-bg); border-color: var(--proc-node-border); ring-color: var(--proc-node-ring);"
                >
                  @switch (step.icon) { @case ('calendar') {
                    <lucide-icon [img]="iCalendar" class="h-6 w-6" style="color: var(--proc-icon);"></lucide-icon>
                  } @case ('clipboard') {
                    <lucide-icon [img]="iClipboard" class="h-6 w-6" style="color: var(--proc-icon);"></lucide-icon>
                  } @case ('stethoscope') {
                    <lucide-icon [img]="iStetho" class="h-6 w-6" style="color: var(--proc-icon);"></lucide-icon>
                  } @default {
                    <lucide-icon [img]="iFollow" class="h-6 w-6" style="color: var(--proc-icon);"></lucide-icon>
                  } }
                </div>

                <span
                  class="mt-2 inline-flex rounded-full px-2 py-0.5 text-[11px] font-extrabold border"
                  style="background: var(--proc-step-badge-bg); color: var(--proc-step-badge-text); border-color: var(--proc-card-border);"
                >
                  Paso {{ step.number }}
                </span>
              </div>

              <!-- bottom: card -->
              <article
                class="mt-5 rounded-3xl border p-6 shadow-sm hover:shadow-xl hover:-translate-y-0.5 transition h-full flex flex-col"
                style="background: var(--proc-card-bg); border-color: var(--proc-card-border);"
              >
                <div class="flex items-start gap-3">
                  <div class="min-w-0">
                    <p class="text-base font-extrabold" style="color: var(--proc-title);">
                      {{ step.title }}
                    </p>
                    <p class="mt-2 text-sm leading-relaxed" style="color: var(--proc-body);">
                      {{ step.description }}
                    </p>
                  </div>
                  <span class="ml-auto mt-1 h-2.5 w-2.5 rounded-full" style="background: var(--proc-accent-dot);"></span>
                </div>

                
              </article>
            </div>
          }
        </div>
      </div>

      <!-- Optional CTA simple (si quieres) -->
      <div class="mt-10">
        <a
          [routerLink]="['/contacto']"
          class="inline-flex items-center justify-center gap-2 rounded-full px-6 py-3 text-sm font-extrabold shadow-sm hover:shadow-md hover:-translate-y-0.5 transition"
          style="background: var(--proc-cta-bg); color: white;"
        >
          Agendar cita
          <span class="font-black" style="color: var(--proc-cta-dot);">•</span>
        </a>
      </div>
    </div>
  </div>
</section>
