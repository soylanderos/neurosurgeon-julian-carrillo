<section
  class="relative overflow-hidden py-16 md:py-24"
  style="background: linear-gradient(to bottom,
    color-mix(in srgb, var(--brand-300) 10%, white),
    white,
    white
  );"
>
  <!-- Ambient background -->
  <div class="pointer-events-none absolute inset-0">
    <div
      class="absolute -top-28 -left-28 h-[520px] w-[520px] rounded-full blur-3xl"
      style="background: color-mix(in srgb, var(--brand-300) 50%, transparent);"
    ></div>
    <div
      class="absolute -bottom-32 -right-32 h-[560px] w-[560px] rounded-full blur-3xl"
      style="background: color-mix(in srgb, var(--brand-200) 30%, transparent);"
    ></div>
    <div
      class="absolute top-1/3 right-1/4 h-[420px] w-[420px] rounded-full blur-3xl"
      style="background: color-mix(in srgb, var(--brand-500) 12%, transparent);"
    ></div>
    <div
      class="absolute inset-0 opacity-[0.06]"
      style="background-image: radial-gradient(color-mix(in srgb, var(--brand-950) 70%, transparent) 0.6px, transparent 0.6px); background-size: 18px 18px;"
    ></div>
  </div>

  <div class="relative container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Breadcrumb -->
    <nav
      class="text-sm mb-10 max-w-6xl mx-auto"
      style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);"
    >
      <a routerLink="/" class="transition hover:opacity-80" style="color: var(--brand-600);">Inicio</a>
      <span class="mx-2">/</span>
      <span class="font-semibold" style="color: var(--brand-950);">Contacto</span>
    </nav>

    <!-- Header -->
    <header class="max-w-6xl mx-auto mb-10 md:mb-14">
      <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6">
        <div class="max-w-3xl">
          <span
            class="inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-extrabold tracking-wide border backdrop-blur"
            style="
              background: rgba(255,255,255,.82);
              color: var(--brand-950);
              border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
            "
          >
            <span class="h-2 w-2 rounded-full" style="background: var(--brand-500);"></span>
            Atención con cita
          </span>

          <h1 class="mt-4 text-4xl md:text-5xl font-extrabold leading-[1.06] text-balance" style="color: var(--brand-950);">
            Agenda tu consulta
          </h1>

          <p class="mt-3 text-lg md:text-xl leading-relaxed text-pretty" style="color: color-mix(in srgb, var(--brand-800) 72%, transparent);">
            Envíanos tu solicitud y te contactamos para confirmar disponibilidad. Para respuesta rápida, WhatsApp.
          </p>

          <div class="mt-5 flex flex-wrap gap-2">
            <span
              class="inline-flex items-center rounded-full border bg-white/80 px-3 py-1.5 text-xs font-extrabold"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: color-mix(in srgb, var(--brand-600) 85%, transparent);"
            >
              Respuesta por WhatsApp o llamada
            </span>
            <span
              class="inline-flex items-center rounded-full border bg-white/80 px-3 py-1.5 text-xs font-extrabold"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: color-mix(in srgb, var(--brand-600) 85%, transparent);"
            >
              Ubicación lista para abrir en Maps
            </span>
            <span
              class="inline-flex items-center rounded-full border bg-white/80 px-3 py-1.5 text-xs font-extrabold"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: color-mix(in srgb, var(--brand-600) 85%, transparent);"
            >
              Confirmación según disponibilidad
            </span>
          </div>
        </div>

        <!-- Quick CTAs -->
        <div class="flex flex-col sm:flex-row gap-3">
          <a
            class="inline-flex items-center justify-center rounded-2xl px-5 py-3 text-white font-extrabold shadow-sm transition hover:opacity-95"
            [href]="whatsappUrl"
            target="_blank"
            rel="noopener"
            style="background: var(--brand-950);"
          >
            WhatsApp
          </a>
          <a
            class="inline-flex items-center justify-center rounded-2xl bg-white px-5 py-3 font-extrabold border transition hover:opacity-90"
            [href]="telUrl"
            style="
              color: var(--brand-950);
              border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
            "
          >
            Llamar
          </a>
        </div>
      </div>
    </header>

    <!-- MAIN -->
    <div class="max-w-6xl mx-auto grid lg:grid-cols-[.92fr_1.08fr] gap-8 lg:gap-10 items-start">
      <!-- LEFT -->
      <aside class="lg:sticky lg:top-24 space-y-6">
        <!-- Action Bento -->
        <section
          class="rounded-3xl backdrop-blur shadow-sm overflow-hidden border"
          style="background: rgba(255,255,255,.82); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
        >
          <div
            class="p-6 border-b"
            style="
              border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
              background: linear-gradient(to bottom, color-mix(in srgb, var(--brand-300) 18%, white), white);
            "
          >
            <h3 class="text-lg font-extrabold" style="color: var(--brand-950);">Acciones rápidas</h3>
            <p class="mt-1 text-sm" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Elige el canal más rápido para ti.</p>
          </div>

          <div class="p-6 grid grid-cols-2 gap-3">
            <!-- WhatsApp tile -->
            <a
              class="col-span-2 group rounded-2xl p-5 text-white shadow-sm hover:shadow-md transition border"
              [href]="whatsappUrl"
              target="_blank"
              rel="noopener"
              style="
                background: linear-gradient(135deg, var(--brand-800), var(--brand-950));
                border-color: color-mix(in srgb, white 18%, transparent);
              "
            >
              <div class="flex items-start justify-between gap-4">
                <div>
                  <p class="text-xs font-extrabold tracking-wide text-white/80">WHATSAPP</p>
                  <p class="mt-1 text-xl font-extrabold">Respuesta rápida</p>
                  <p class="mt-1 text-sm text-white/75">Ideal para confirmar horarios.</p>
                </div>
                <span class="grid h-12 w-12 place-items-center rounded-2xl bg-white/15 border border-white/20">
                  <lucide-icon [img]="iWhatsapp" class="h-6 w-6 text-white"></lucide-icon>
                </span>
              </div>
              <div class="mt-4 h-[3px] w-10 rounded-full bg-white/60 group-hover:w-16 transition-all"></div>
            </a>

            <!-- Call tile -->
            <a
              class="rounded-2xl bg-white p-4 transition border hover:opacity-90"
              [href]="telUrl"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
            >
              <div class="flex items-start gap-3">
                <span
                  class="grid h-11 w-11 place-items-center rounded-2xl border"
                  style="
                    background: color-mix(in srgb, var(--brand-300) 25%, white);
                    border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                  "
                >
                  <lucide-icon [img]="iPhone" class="h-5 w-5" style="color: var(--brand-950);"></lucide-icon>
                </span>
                <div>
                  <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">LLAMADA</p>
                  <p class="mt-1 font-extrabold" style="color: var(--brand-950);">Hablar ahora</p>
                  <p class="mt-1 text-xs" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Directo y claro.</p>
                </div>
              </div>
            </a>

            <!-- Maps tile -->
            <a
              class="rounded-2xl bg-white p-4 transition border hover:opacity-90"
              [href]="mapsUrl"
              target="_blank"
              rel="noopener"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
            >
              <div class="flex items-start gap-3">
                <span
                  class="grid h-11 w-11 place-items-center rounded-2xl border"
                  style="
                    background: color-mix(in srgb, var(--brand-200) 22%, white);
                    border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                  "
                >
                  <lucide-icon [img]="iMapPin" class="h-5 w-5" style="color: var(--brand-950);"></lucide-icon>
                </span>
                <div>
                  <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">MAPS</p>
                  <p class="mt-1 font-extrabold" style="color: var(--brand-950);">Cómo llegar</p>
                  <p class="mt-1 text-xs" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Ruta en 1 click.</p>
                </div>
              </div>
            </a>
          </div>

          <div class="px-6 pb-6">
            <div
              class="rounded-2xl border p-4"
              style="
                border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                background: linear-gradient(to bottom, color-mix(in srgb, var(--brand-300) 16%, white), white);
              "
            >
              <div class="flex items-start gap-3">
                <span class="grid h-11 w-11 place-items-center rounded-2xl bg-white border"
                      style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);">
                  <lucide-icon [img]="iClock" class="h-5 w-5" style="color: var(--brand-950);"></lucide-icon>
                </span>
                <div class="min-w-0">
                  <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">HORARIO</p>
                  <p class="mt-1 text-sm font-extrabold" style="color: var(--brand-950);">{{ officeHours }}</p>
                  <p class="mt-1 text-xs" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Atención con cita.</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Datos -->
        <section
          class="rounded-3xl backdrop-blur shadow-sm overflow-hidden border"
          style="background: rgba(255,255,255,.82); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
        >
          <div
            class="p-6 border-b"
            style="
              border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
              background: linear-gradient(to bottom, color-mix(in srgb, var(--brand-300) 18%, white), white);
            "
          >
            <h3 class="text-lg font-extrabold" style="color: var(--brand-950);">Datos</h3>
            <p class="mt-1 text-sm" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Copiar rápido, sin buscar.</p>
          </div>

          <div class="p-6 grid gap-3">
            <button
              type="button"
              (click)="copyText(fullAddress)"
              class="rounded-2xl border bg-white px-4 py-3 text-left transition hover:opacity-90"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
            >
              <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">DIRECCIÓN</p>
              <p class="mt-1 font-extrabold line-clamp-2" style="color: var(--brand-950);">{{ fullAddress }}</p>
              <p class="mt-1 text-xs" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Toca para copiar</p>
            </button>

            <div class="grid grid-cols-2 gap-3">
              <button
                type="button"
                (click)="copyText(phone)"
                class="rounded-2xl border bg-white px-4 py-3 text-left transition hover:opacity-90"
                style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
              >
                <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">TEL</p>
                <p class="mt-1 font-extrabold" style="color: var(--brand-950);">{{ phone }}</p>
                <p class="mt-1 text-xs" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Copiar</p>
              </button>

              <button
                type="button"
                (click)="copyText(email)"
                class="rounded-2xl border bg-white px-4 py-3 text-left transition hover:opacity-90"
                style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
              >
                <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">EMAIL</p>
                <p class="mt-1 font-extrabold truncate" style="color: var(--brand-950);">{{ email }}</p>
                <p class="mt-1 text-xs" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Copiar</p>
              </button>
            </div>
          </div>
        </section>
      </aside>

      <!-- RIGHT: Form -->
      <section
        class="rounded-3xl backdrop-blur shadow-sm overflow-hidden border"
        style="background: rgba(255,255,255,.82); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
      >
        <div
          class="px-6 md:px-8 py-6 border-b"
          style="
            border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
            background: linear-gradient(to bottom, color-mix(in srgb, var(--brand-300) 18%, white), white);
          "
        >
          <div class="flex items-start justify-between gap-4 flex-wrap">
            <div>
              <h2 class="text-lg md:text-xl font-extrabold" style="color: var(--brand-950);">Solicitud de cita</h2>
              <p class="mt-1 text-sm" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                Completa lo básico. Lo demás lo resolvemos contigo por WhatsApp o llamada.
              </p>
            </div>
            <span
              class="inline-flex items-center rounded-full px-3 py-1 text-xs font-extrabold border bg-white/80"
              style="color: var(--brand-950); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
            >
              ~ 2–3 min
            </span>
          </div>

          <div class="mt-5 grid grid-cols-3 gap-2">
            <div class="rounded-2xl border bg-white/80 px-4 py-3"
                 style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);">
              <p class="text-xs font-extrabold" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">1</p>
              <p class="text-sm font-extrabold" style="color: var(--brand-950);">Tus datos</p>
            </div>
            <div class="rounded-2xl border bg-white/70 px-4 py-3"
                 style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);">
              <p class="text-xs font-extrabold" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">2</p>
              <p class="text-sm font-extrabold" style="color: var(--brand-950);">Preferencias</p>
            </div>
            <div class="rounded-2xl border bg-white/70 px-4 py-3"
                 style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);">
              <p class="text-xs font-extrabold" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">3</p>
              <p class="text-sm font-extrabold" style="color: var(--brand-950);">Motivo</p>
            </div>
          </div>
        </div>

        <div class="p-6 md:p-8">
          <form class="grid sm:grid-cols-2 gap-4" [formGroup]="form" (ngSubmit)="submit()">
            <div class="sm:col-span-2 mt-1">
              <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">TUS DATOS</p>
              <div class="mt-3 h-px w-full" style="background: color-mix(in srgb, var(--brand-200) 55%, transparent);"></div>
            </div>

            <div class="sm:col-span-2">
              <label class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Nombre completo</label>
              <input
                type="text"
                formControlName="full_name"
                class="mt-2 w-full rounded-2xl border bg-white px-4 py-3 placeholder:opacity-60 focus:outline-none focus:ring-4"
                [style]="
                  'border-color: ' + 'color-mix(in srgb, var(--brand-200) 55%, transparent)' + ';' +
                  'color: var(--brand-950);' +
                  'caret-color: var(--brand-950);' +
                  'outline: none;'
                "
                style="--tw-ring-color: color-mix(in srgb, var(--brand-300) 35%, transparent);"
                placeholder="Ej. Juan Pérez"
                autocomplete="name"
              />
              @if (showErr('full_name')) {
                <p class="mt-1 text-xs font-semibold" style="color: #b91c1c;">Escribe tu nombre (mínimo 3 caracteres).</p>
              }
            </div>

            <div>
              <label class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Teléfono</label>
              <input
                type="tel"
                formControlName="phone"
                class="mt-2 w-full rounded-2xl border bg-white px-4 py-3 placeholder:opacity-60 focus:outline-none focus:ring-4"
                style="--tw-ring-color: color-mix(in srgb, var(--brand-300) 35%, transparent); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: var(--brand-950);"
                placeholder="Ej. +52 656 000 0000"
                autocomplete="tel"
              />
              @if (showErr('phone')) {
                <p class="mt-1 text-xs font-semibold" style="color: #b91c1c;">Teléfono inválido (mínimo 8 dígitos).</p>
              }
            </div>

            <div>
              <label class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Email (opcional)</label>
              <input
                type="email"
                formControlName="email"
                class="mt-2 w-full rounded-2xl border bg-white px-4 py-3 placeholder:opacity-60 focus:outline-none focus:ring-4"
                style="--tw-ring-color: color-mix(in srgb, var(--brand-300) 35%, transparent); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: var(--brand-950);"
                placeholder="correo@ejemplo.com"
                autocomplete="email"
              />
              @if (showErr('email')) {
                <p class="mt-1 text-xs font-semibold" style="color: #b91c1c;">Email inválido.</p>
              }
            </div>

            <div class="sm:col-span-2 mt-4">
              <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">PREFERENCIAS</p>
              <div class="mt-3 h-px w-full" style="background: color-mix(in srgb, var(--brand-200) 55%, transparent);"></div>
            </div>

            <div>
              <label class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Fecha preferida (opcional)</label>
              <input
                type="date"
                formControlName="preferred_date"
                class="mt-2 w-full rounded-2xl border bg-white px-4 py-3 focus:outline-none focus:ring-4"
                style="--tw-ring-color: color-mix(in srgb, var(--brand-300) 35%, transparent); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: var(--brand-950);"
              />
            </div>

            <div>
              <label class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Hora preferida (opcional)</label>
              <input
                type="time"
                formControlName="preferred_time"
                class="mt-2 w-full rounded-2xl border bg-white px-4 py-3 focus:outline-none focus:ring-4"
                style="--tw-ring-color: color-mix(in srgb, var(--brand-300) 35%, transparent); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: var(--brand-950);"
              />
            </div>

            <div class="sm:col-span-2 mt-4">
              <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">MOTIVO</p>
              <div class="mt-3 h-px w-full" style="background: color-mix(in srgb, var(--brand-200) 55%, transparent);"></div>
            </div>

            <div class="sm:col-span-2">
              <label class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Motivo de la consulta</label>
              <textarea
                rows="4"
                formControlName="reason"
                class="mt-2 w-full rounded-2xl border bg-white px-4 py-3 placeholder:opacity-60 focus:outline-none focus:ring-4"
                style="--tw-ring-color: color-mix(in srgb, var(--brand-300) 35%, transparent); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: var(--brand-950);"
                placeholder="Describe síntomas, diagnóstico o motivo principal."
              ></textarea>
              @if (showErr('reason')) {
                <p class="mt-1 text-xs font-semibold" style="color: #b91c1c;">Describe el motivo (mínimo 10 caracteres).</p>
              }
            </div>

            <div class="sm:col-span-2">
              <label class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Notas (opcional)</label>
              <input
                type="text"
                formControlName="notes"
                class="mt-2 w-full rounded-2xl border bg-white px-4 py-3 placeholder:opacity-60 focus:outline-none focus:ring-4"
                style="--tw-ring-color: color-mix(in srgb, var(--brand-300) 35%, transparent); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: var(--brand-950);"
                placeholder="Ej. Tengo estudios previos / dolor desde hace 3 semanas."
              />
            </div>

            <div class="sm:col-span-2 mt-2 flex flex-col sm:flex-row gap-3">
              <button
                type="submit"
                [disabled]="submitting() || form.invalid"
                class="inline-flex items-center justify-center rounded-2xl px-5 py-3 text-white font-extrabold transition disabled:opacity-60 disabled:cursor-not-allowed"
                style="background: var(--brand-950);"
              >
                @if (submitting()) { Enviando… } @else { Enviar solicitud }
              </button>

              <a
                class="inline-flex items-center justify-center rounded-2xl bg-white px-5 py-3 font-extrabold border transition hover:opacity-90"
                [href]="whatsappUrl"
                target="_blank"
                rel="noopener"
                style="color: var(--brand-950); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
              >
                Prefiero WhatsApp
              </a>
            </div>

            @if (submitError()) {
              <div class="sm:col-span-2 rounded-2xl border bg-white/85 backdrop-blur p-4" style="border-color: #fecaca; color: #b91c1c;">
                <p class="font-semibold">No se pudo enviar.</p>
                <p class="text-sm mt-1">{{ submitError() }}</p>
              </div>
            }

            <div
              class="sm:col-span-2 mt-3 rounded-2xl border p-5"
              style="
                border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                background: linear-gradient(to bottom, color-mix(in srgb, var(--brand-300) 16%, white), white);
              "
            >
              <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">TIP</p>
              <p class="mt-1 text-sm leading-relaxed" style="color: color-mix(in srgb, var(--brand-800) 78%, transparent);">
                Si cuentas con estudios previos, menciónalos en “Notas”. Esto agiliza el seguimiento.
              </p>
              <p class="mt-3 text-xs leading-relaxed" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                Nota: Esta solicitud no sustituye una valoración médica. La confirmación depende de disponibilidad.
              </p>
            </div>
          </form>
        </div>
      </section>
    </div>

    <!-- MAP -->
    <div class="max-w-6xl mx-auto mt-10 lg:mt-12">
      <section
        class="rounded-3xl overflow-hidden border backdrop-blur shadow-sm"
        style="background: rgba(255,255,255,.82); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
      >
        <div
          class="px-6 md:px-8 py-6 border-b"
          style="
            border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
            background: linear-gradient(to bottom, color-mix(in srgb, var(--brand-300) 18%, white), white);
          "
        >
          <div class="flex items-center justify-between gap-4 flex-wrap">
            <div>
              <h3 class="text-lg font-extrabold" style="color: var(--brand-950);">Ubicación</h3>
              <p class="mt-1 text-sm" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Abre Maps para obtener ruta.</p>
            </div>
            <a
              class="inline-flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-extrabold border transition hover:opacity-90"
              [href]="mapsUrl"
              target="_blank"
              rel="noopener"
              style="color: var(--brand-950); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
            >
              <lucide-icon [img]="iNav" class="h-4 w-4"></lucide-icon>
              Abrir en Maps
            </a>
          </div>
        </div>

        <div class="relative aspect-[16/9] w-full" style="background: color-mix(in srgb, var(--brand-200) 20%, white);">
          @if (mapEmbedUrl) {
            <iframe
              class="absolute inset-0 w-full h-full"
              [src]="mapEmbedUrl"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              title="Mapa del consultorio"
            ></iframe>
          } @else {
            <div class="absolute inset-0 grid place-items-center p-8 text-center">
              <div
                class="mx-auto h-14 w-14 rounded-2xl border grid place-items-center"
                style="background: color-mix(in srgb, var(--brand-500) 12%, white); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
              >
                <lucide-icon [img]="iMapPin" class="h-7 w-7" style="color: var(--brand-500);"></lucide-icon>
              </div>
              <p class="mt-4 font-extrabold" style="color: var(--brand-950);">Mapa disponible</p>
              <p class="mt-1 text-sm" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">Abre la ubicación en Google Maps.</p>
            </div>
          }
        </div>
      </section>
    </div>
  </div>

  <!-- Sticky mobile CTA -->
  <div class="fixed inset-x-0 bottom-0 z-[55] lg:hidden">
    <div class="mx-auto w-[min(96vw,560px)] mb-3">
      <div
        class="rounded-3xl border bg-white/90 backdrop-blur shadow-2xl p-3"
        style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
      >
        <div class="grid grid-cols-2 gap-2">
          <a
            class="inline-flex items-center justify-center rounded-2xl px-4 py-3 text-white font-extrabold"
            [href]="whatsappUrl"
            target="_blank"
            rel="noopener"
            style="background: var(--brand-950);"
          >
            WhatsApp
          </a>
          <a
            class="inline-flex items-center justify-center rounded-2xl bg-white px-4 py-3 font-extrabold border"
            [href]="telUrl"
            style="color: var(--brand-950); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
          >
            Llamar
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div class="toast fixed bottom-5 left-1/2 -translate-x-1/2 z-[60] w-[min(92vw,520px)]" [class.toast--open]="toastOpen()" aria-live="polite">
    <div
      class="rounded-2xl border bg-white shadow-2xl px-4 py-3 flex items-start gap-3"
      style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
    >
      <div class="mt-0.5">
        <lucide-icon [img]="iOk" class="w-5 h-5" style="color: var(--brand-500);"></lucide-icon>
      </div>
      <div class="min-w-0">
        <p class="font-semibold" style="color: var(--brand-950);">{{ toastTitle() }}</p>
        <p class="text-sm" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">{{ toastDesc() }}</p>
      </div>
      <button
        type="button"
        class="ml-auto rounded-lg p-2 transition hover:opacity-80"
        (click)="closeToast()"
        aria-label="Cerrar"
      >
        <lucide-icon [img]="iX" class="w-4 h-4" style="color: var(--brand-600);"></lucide-icon>
      </button>
    </div>
  </div>
</section>
