<section class="relative overflow-hidden bg-[#F7FAFF]">
  <!-- Background decor (palette) -->
  <div class="pointer-events-none absolute inset-0">
    <div class="absolute -top-32 -left-28 h-[520px] w-[520px] rounded-full bg-[#AFCEE3]/55 blur-3xl"></div>
    <div class="absolute top-32 -right-28 h-[560px] w-[560px] rounded-full bg-[#215EBB]/12 blur-3xl"></div>
    <div class="absolute bottom-0 left-1/3 h-[520px] w-[520px] rounded-full bg-[#C3B692]/28 blur-3xl"></div>
    <div
      class="absolute inset-0 opacity-[0.06]"
      style="background-image: radial-gradient(rgba(14,40,89,.55) 0.6px, transparent 0.6px); background-size: 18px 18px;"
    ></div>
  </div>

  <div class="relative container mx-auto px-4 sm:px-6 lg:px-8 py-14 md:py-20 max-w-6xl">
    @if (error()) {
      <div class="rounded-[2rem] border border-red-200 bg-white/80 backdrop-blur p-6 text-center text-red-700 shadow-sm">
        {{ error() }}
      </div>
    } @else {

      @if (loading()) {
        <!-- Premium skeleton (palette) -->
        <div class="animate-pulse">
          <div class="max-w-6xl mx-auto">
            <div class="h-8 w-56 bg-[#AFCEE3]/40 rounded-full mb-8"></div>

            <div class="rounded-[2rem] border border-[#0E2859]/10 bg-white/80 backdrop-blur p-8 md:p-10 mb-10 shadow-sm">
              <div class="h-10 bg-[#AFCEE3]/45 rounded w-4/5 mb-4"></div>
              <div class="h-6 bg-[#AFCEE3]/35 rounded w-2/3 mb-6"></div>
              <div class="h-5 bg-[#AFCEE3]/30 rounded w-full mb-2"></div>
              <div class="h-5 bg-[#AFCEE3]/30 rounded w-5/6 mb-2"></div>
              <div class="h-5 bg-[#AFCEE3]/30 rounded w-2/3"></div>

              <div class="mt-8 flex gap-3">
                <div class="h-12 w-40 bg-[#AFCEE3]/35 rounded-2xl"></div>
                <div class="h-12 w-44 bg-[#AFCEE3]/30 rounded-2xl"></div>
              </div>
            </div>

            <div class="grid lg:grid-cols-[1fr_360px] gap-8">
              <div class="space-y-6">
                <div class="rounded-[2rem] border border-[#0E2859]/10 bg-white/80 backdrop-blur p-7 shadow-sm">
                  <div class="h-7 w-56 bg-[#AFCEE3]/40 rounded mb-5"></div>
                  <div class="grid md:grid-cols-2 gap-3">
                    @for (i of skeletonLines; track i) {
                      <div class="h-14 bg-white/70 border border-[#0E2859]/10 rounded-2xl"></div>
                    }
                  </div>
                </div>

                <div class="rounded-[2rem] border border-[#0E2859]/10 bg-white/80 backdrop-blur p-7 shadow-sm">
                  <div class="h-7 w-56 bg-[#AFCEE3]/40 rounded mb-5"></div>
                  <div class="space-y-3">
                    @for (i of skeletonLines; track i) {
                      <div class="h-16 bg-white/70 border border-[#0E2859]/10 rounded-2xl"></div>
                    }
                  </div>
                </div>

                <div class="rounded-[2rem] border border-[#0E2859]/10 bg-white/80 backdrop-blur p-7 shadow-sm">
                  <div class="h-7 w-56 bg-[#AFCEE3]/40 rounded mb-5"></div>
                  <div class="space-y-3">
                    @for (i of skeletonLines; track i) {
                      <div class="h-20 bg-white/70 border border-[#0E2859]/10 rounded-2xl"></div>
                    }
                  </div>
                </div>
              </div>

              <div class="space-y-6">
                <div class="rounded-[2rem] border border-[#0E2859]/10 bg-white/80 backdrop-blur p-7 shadow-sm">
                  <div class="h-6 w-40 bg-[#AFCEE3]/40 rounded mb-4"></div>
                  <div class="h-12 bg-[#AFCEE3]/35 rounded-2xl mb-3"></div>
                  <div class="h-12 bg-[#AFCEE3]/30 rounded-2xl"></div>
                </div>

                <div class="rounded-[2rem] border border-[#0E2859]/10 bg-white/80 backdrop-blur p-7 shadow-sm">
                  <div class="h-6 w-40 bg-[#AFCEE3]/40 rounded mb-4"></div>
                  <div class="h-5 bg-[#AFCEE3]/30 rounded w-full mb-2"></div>
                  <div class="h-5 bg-[#AFCEE3]/30 rounded w-5/6"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      } @else {

        @if (servicio(); as s) {

          <!-- Breadcrumb (pill) -->
          <nav class="text-sm text-[#0E2859]/65 mb-6">
            <div class="inline-flex items-center gap-2 rounded-full border border-white/70 bg-white/70 backdrop-blur px-4 py-2 shadow-sm">
              <a routerLink="/" class="hover:text-[#215EBB] transition">Inicio</a>
              <span class="text-[#0E2859]/35">/</span>
              <a routerLink="/servicios" class="hover:text-[#215EBB] transition">Servicios</a>
              <span class="text-[#0E2859]/35">/</span>
              <span class="text-[#0E2859] font-extrabold">{{ s.breadcrumb }}</span>
            </div>
          </nav>

          <!-- HERO (editorial + image panel) -->
          <header
            class="relative overflow-hidden rounded-[2rem] border border-white/70 bg-white/70 backdrop-blur-xl
                   shadow-[0_30px_90px_-55px_rgba(14,40,89,.6)]"
          >
            <!-- accents -->
            <div class="pointer-events-none absolute inset-0">
              <div class="absolute -top-20 -right-24 h-72 w-72 rounded-full bg-[#215EBB]/12 blur-3xl"></div>
              <div class="absolute -bottom-28 -left-24 h-80 w-80 rounded-full bg-[#CE6C37]/10 blur-3xl"></div>
              <div class="absolute inset-x-0 top-0 h-24 bg-gradient-to-b from-white/70 to-transparent"></div>
            </div>

            <div class="relative p-7 md:p-10">
              <div class="grid lg:grid-cols-[1fr_360px] gap-8 items-start">
                <!-- LEFT: content -->
                <div>
                  <div class="flex items-center justify-between gap-4 flex-wrap">
                    <span
                      class="inline-flex items-center gap-2 rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1 text-xs font-extrabold text-[#0E2859]/75"
                    >
                      <span class="h-2 w-2 rounded-full bg-[#CE6C37]"></span>
                      Servicio
                    </span>

                    <!-- TOC pills -->
                    <div class="hidden md:flex items-center gap-2 text-xs">
                      <a
                        [routerLink]="[]"
                        fragment="sintomas"
                        class="rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1 text-[#0E2859]/75 hover:text-[#215EBB] hover:border-[#215EBB]/25 transition"
                      >
                        Síntomas
                      </a>
                      <a
                        [routerLink]="[]"
                        fragment="tratamientos"
                        class="rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1 text-[#0E2859]/75 hover:text-[#215EBB] hover:border-[#215EBB]/25 transition"
                      >
                        Tratamientos
                      </a>
                      <a
                        [routerLink]="[]"
                        fragment="faq"
                        class="rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1 text-[#0E2859]/75 hover:text-[#215EBB] hover:border-[#215EBB]/25 transition"
                      >
                        Preguntas
                      </a>
                    </div>
                  </div>

                  <h1 class="mt-4 text-4xl md:text-5xl font-black text-[#0E2859] tracking-tight text-balance leading-[1.05]">
                    {{ s.title }}
                  </h1>

                  <p class="mt-4 text-lg md:text-xl font-extrabold text-[#215EBB] text-pretty">
                    {{ s.subtitle }}
                  </p>

                  <p class="mt-4 text-lg text-[#0E2859]/70 leading-relaxed text-pretty">
                    {{ s.description }}
                  </p>

                  <div class="mt-6 flex flex-col sm:flex-row gap-3">
                    <a
                      routerLink="/cita"
                      class="inline-flex items-center justify-center rounded-2xl bg-[#0E2859] px-5 py-3 text-white font-extrabold
                             shadow-sm hover:brightness-110 transition"
                    >
                      Agendar cita
                    </a>

                    <a
                      [routerLink]="[]"
                      fragment="tratamientos"
                      class="inline-flex items-center justify-center rounded-2xl bg-white/90 px-5 py-3 text-[#0E2859] font-extrabold
                             border border-[#0E2859]/10 hover:border-[#215EBB]/25 hover:text-[#215EBB] transition"
                    >
                      Ver opciones de tratamiento
                    </a>
                  </div>

                  <div class="mt-7 h-px w-full bg-gradient-to-r from-transparent via-[#0E2859]/15 to-transparent"></div>

                  <!-- mini stats -->
                  <div class="mt-6 grid sm:grid-cols-3 gap-3">
                    <div class="rounded-2xl border border-[#0E2859]/10 bg-white/80 p-4">
                      <div class="text-xs font-extrabold tracking-wide text-[#0E2859]/55">ENFOQUE</div>
                      <div class="mt-1 text-sm font-extrabold text-[#0E2859]">Evaluación integral</div>
                    </div>
                    <div class="rounded-2xl border border-[#0E2859]/10 bg-white/80 p-4">
                      <div class="text-xs font-extrabold tracking-wide text-[#0E2859]/55">PLAN</div>
                      <div class="mt-1 text-sm font-extrabold text-[#0E2859]">Opciones claras y por etapas</div>
                    </div>
                    <div class="rounded-2xl border border-[#0E2859]/10 bg-white/80 p-4">
                      <div class="text-xs font-extrabold tracking-wide text-[#0E2859]/55">OBJETIVO</div>
                      <div class="mt-1 text-sm font-extrabold text-[#0E2859]">Recuperación y seguridad</div>
                    </div>
                  </div>
                </div>

                <!-- RIGHT: image card -->
                <div class="relative">
                  <div
                    class="rounded-[2rem] p-[1px]"
                    style="background: linear-gradient(135deg, rgba(206,108,55,.25), rgba(33,94,187,.22), rgba(175,206,227,.55));"
                  >
                    <div class="relative overflow-hidden rounded-[2rem] border border-white/70 bg-white/80 backdrop-blur shadow-sm">
                      <div class="absolute inset-0 bg-gradient-to-t from-[#0E2859]/25 via-transparent to-transparent"></div>

                      <!-- Puedes cambiar esta imagen por una de consultorio/quirófano si luego quieres -->
                      <img
                        src="https://hospitalangeles.com/assets/img/medicos/julian-octavio-carrillo-gonzalez.jpg"
                        alt="Dr. Julián Octavio Carrillo"
                        class="h-[280px] w-full object-cover object-[50%_20%]"
                        loading="lazy"
                        decoding="async"
                        referrerpolicy="no-referrer"
                      />

                      <div class="relative p-5">
                        <p class="text-xs font-extrabold tracking-wide text-[#0E2859]/55">ORIENTACIÓN</p>
                        <p class="mt-1 text-sm text-[#0E2859]/75 leading-relaxed">
                          Si tienes estudios previos, llévalos a la valoración. Ayuda a definir el plan con mayor precisión.
                        </p>

                        <div class="mt-4 flex flex-wrap gap-2">
                          <span class="inline-flex items-center gap-2 rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1 text-xs font-extrabold text-[#0E2859]/70">
                            <span class="h-2 w-2 rounded-full bg-[#215EBB]"></span>
                            Brain &amp; Spine
                          </span>
                          <span class="inline-flex items-center gap-2 rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1 text-xs font-extrabold text-[#0E2859]/70">
                            <span class="h-2 w-2 rounded-full bg-[#CE6C37]"></span>
                            Atención con cita
                          </span>
                        </div>
                      </div>

                      <div class="h-1.5 w-full" style="background: linear-gradient(90deg, #CE6C37, #215EBB, #AFCEE3);"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </header>

          <!-- MAIN + SIDEBAR -->
          <div class="mt-10 grid lg:grid-cols-[1fr_360px] gap-8 lg:gap-10">
            <!-- MAIN -->
            <main class="space-y-8">
              <!-- SECTION: sintomas -->
              <section
                id="sintomas"
                class="scroll-mt-28 rounded-[2rem] border border-white/70 bg-white/80 backdrop-blur
                       shadow-[0_14px_40px_-26px_rgba(14,40,89,.35)] p-7 md:p-8"
              >
                <div class="flex items-end justify-between gap-6 flex-wrap">
                  <div>
                    <h2 class="text-2xl md:text-3xl font-black text-[#0E2859]">
                      {{ s.symptoms_title || 'Síntomas comunes' }}
                    </h2>
                    <p class="mt-2 text-[#0E2859]/65">
                      Si presentas uno o más de estos síntomas, se recomienda valoración.
                    </p>
                  </div>

                  <a
                    [routerLink]="[]"
                    fragment="faq"
                    class="text-sm font-extrabold text-[#215EBB] hover:opacity-80 transition"
                  >
                    Ver preguntas frecuentes →
                  </a>
                </div>

                <div class="mt-6 grid md:grid-cols-2 gap-3 items-stretch">
                  @for (item of s.symptoms; track item) {
                    <div
                      class="group rounded-2xl border border-[#0E2859]/10 bg-white/70 p-4
                             hover:bg-white hover:border-[#215EBB]/25 transition"
                    >
                      <div class="flex items-start gap-3">
                        <span class="mt-1 inline-block h-2.5 w-2.5 rounded-full bg-[#215EBB]"></span>
                        <p class="text-[#0E2859]/75 leading-relaxed">{{ item }}</p>
                      </div>
                    </div>
                  }
                </div>
              </section>

              <!-- SECTION: tratamientos -->
              <section
                id="tratamientos"
                class="scroll-mt-28 rounded-[2rem] border border-white/70 bg-white/80 backdrop-blur
                       shadow-[0_14px_40px_-26px_rgba(14,40,89,.35)] p-7 md:p-8"
              >
                <div>
                  <h2 class="text-2xl md:text-3xl font-black text-[#0E2859]">
                    {{ s.treatments_title || 'Opciones de tratamiento' }}
                  </h2>
                  <p class="mt-2 text-[#0E2859]/65">
                    El plan se define según diagnóstico, estudios y objetivos clínicos.
                  </p>
                </div>

                <div class="mt-6 space-y-3">
                  @for (t of s.treatments; track t; let i = $index) {
                    <div
                      class="relative overflow-hidden rounded-2xl border border-[#0E2859]/10 bg-white/80 p-5
                             hover:shadow-sm transition"
                    >
                      <div class="flex items-start gap-4">
                        <div class="shrink-0">
                          <div
                            class="h-9 w-9 rounded-2xl bg-[#0E2859] text-white flex items-center justify-center text-sm font-black"
                          >
                            {{ i + 1 }}
                          </div>
                        </div>
                        <div class="flex-1">
                          <p class="text-[#0E2859]/75 leading-relaxed">{{ t }}</p>
                        </div>
                      </div>

                      <div class="pointer-events-none absolute -top-10 -right-10 h-28 w-28 rounded-full bg-[#AFCEE3]/45 blur-2xl"></div>
                      <div class="pointer-events-none absolute -bottom-10 -left-10 h-28 w-28 rounded-full bg-[#CE6C37]/10 blur-2xl"></div>
                    </div>
                  }
                </div>
              </section>

              <!-- SECTION: faq -->
              <section
                id="faq"
                class="scroll-mt-28 rounded-[2rem] border border-white/70 bg-white/80 backdrop-blur
                       shadow-[0_14px_40px_-26px_rgba(14,40,89,.35)] p-7 md:p-8"
              >
                <div class="flex items-end justify-between gap-6 flex-wrap">
                  <div>
                    <h2 class="text-2xl md:text-3xl font-black text-[#0E2859]">Preguntas frecuentes</h2>
                    <p class="mt-2 text-[#0E2859]/65">
                      Respuestas rápidas para que tomes decisiones con confianza.
                    </p>
                  </div>

                  <a
                    [routerLink]="[]"
                    fragment="sintomas"
                    class="text-sm font-extrabold text-[#0E2859]/70 hover:text-[#215EBB] transition"
                  >
                    Volver a síntomas ↑
                  </a>
                </div>

                <div class="mt-6 space-y-3">
                  @for (f of s.faqs; track f.question) {
                    <details class="group rounded-2xl border border-[#0E2859]/10 bg-white/80 open:bg-white transition">
                      <summary class="cursor-pointer list-none p-5 flex items-start justify-between gap-4">
                        <h3 class="font-extrabold text-[#0E2859] leading-relaxed">
                          {{ f.question }}
                        </h3>

                        <span
                          class="mt-0.5 shrink-0 inline-flex h-9 w-9 items-center justify-center rounded-full
                                 border border-[#0E2859]/10 bg-white text-[#0E2859]
                                 group-open:rotate-45 transition-transform"
                        >
                          <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                          </svg>
                        </span>
                      </summary>

                      <div class="px-5 pb-5 text-[#0E2859]/70 leading-relaxed">
                        {{ f.answer }}
                      </div>
                    </details>
                  }
                </div>
              </section>
            </main>

            <!-- SIDEBAR -->
            <aside class="lg:sticky lg:top-6 h-fit space-y-6">
              <!-- CTA bento -->
              <div class="rounded-[2rem] border border-white/70 bg-white/70 backdrop-blur-xl shadow-sm overflow-hidden">
                <div class="p-6">
                  <p class="text-xs font-extrabold tracking-wide text-[#CE6C37]">SIGUIENTE PASO</p>
                  <h3 class="mt-1 text-lg font-black text-[#0E2859]">Agenda una valoración</h3>
                  <p class="mt-2 text-sm text-[#0E2859]/65">
                    Si tienes síntomas o dudas, una valoración ayuda a definir el plan.
                  </p>

                  <div class="mt-5 space-y-3">
                    <a
                      routerLink="/cita"
                      class="w-full inline-flex items-center justify-center rounded-2xl bg-[#215EBB] px-5 py-3 text-white font-extrabold
                             shadow-[0_18px_50px_-30px_rgba(33,94,187,.7)] hover:brightness-110 transition"
                    >
                      Agendar cita
                    </a>

                    <a
                      routerLink="/contacto"
                      class="w-full inline-flex items-center justify-center rounded-2xl bg-white/90 px-5 py-3 text-[#0E2859] font-extrabold
                             border border-[#0E2859]/10 hover:border-[#215EBB]/25 hover:text-[#215EBB] transition"
                    >
                      Contacto
                    </a>
                  </div>

                  <div class="mt-6 rounded-2xl border border-[#0E2859]/10 bg-white/80 p-4">
                    <p class="text-xs font-extrabold tracking-wide text-[#0E2859]/55">TIP</p>
                    <p class="mt-1 text-sm text-[#0E2859]/75">
                      Lleva estudios previos (si los tienes) y anota síntomas con fechas.
                    </p>
                  </div>
                </div>

                <div class="h-1.5 w-full" style="background: linear-gradient(90deg, #AFCEE3, #215EBB, #CE6C37);"></div>
              </div>

              <!-- Warning / alarm -->
              <div class="rounded-[2rem] border border-[#CE6C37]/20 bg-[#CE6C37]/10 backdrop-blur p-6">
                <div class="flex items-start justify-between gap-4">
                  <div>
                    <h3 class="text-lg font-black text-[#0E2859]">Señales de alarma</h3>
                    <p class="mt-2 text-sm text-[#0E2859]/75 leading-relaxed">
                      {{ s.warning_text }}
                    </p>
                  </div>

                  <div class="h-10 w-10 rounded-2xl bg-white/70 border border-[#CE6C37]/20 flex items-center justify-center">
                    <svg class="h-5 w-5 text-[#0E2859]" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path d="M12 9v5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                      <path d="M12 17h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                      <path
                        d="M10.3 4.5 2.6 18a2 2 0 0 0 1.7 3h15.4a2 2 0 0 0 1.7-3L13.7 4.5a2 2 0 0 0-3.4 0Z"
                        stroke="currentColor" stroke-width="2" stroke-linejoin="round"
                      />
                    </svg>
                  </div>
                </div>
              </div>

              <!-- Sections quick nav -->
              <div class="rounded-[2rem] border border-white/70 bg-white/70 backdrop-blur-xl shadow-sm p-6">
                <h3 class="text-sm font-extrabold text-[#0E2859]">Secciones</h3>
                <div class="mt-3 flex flex-wrap gap-2">
                  <a
                    [routerLink]="[]"
                    fragment="sintomas"
                    class="rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1.5 text-sm font-extrabold text-[#0E2859]/75 hover:text-[#215EBB] hover:border-[#215EBB]/25 transition"
                  >
                    Síntomas
                  </a>
                  <a
                    [routerLink]="[]"
                    fragment="tratamientos"
                    class="rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1.5 text-sm font-extrabold text-[#0E2859]/75 hover:text-[#215EBB] hover:border-[#215EBB]/25 transition"
                  >
                    Tratamientos
                  </a>
                  <a
                    [routerLink]="[]"
                    fragment="faq"
                    class="rounded-full border border-[#0E2859]/10 bg-white/80 px-3 py-1.5 text-sm font-extrabold text-[#0E2859]/75 hover:text-[#215EBB] hover:border-[#215EBB]/25 transition"
                  >
                    Preguntas
                  </a>
                </div>
              </div>
            </aside>
          </div>

        } @else {
          <div class="text-center text-[#0E2859]/70 py-24">Cargando…</div>
        }

      }
    }
  </div>
</section>
