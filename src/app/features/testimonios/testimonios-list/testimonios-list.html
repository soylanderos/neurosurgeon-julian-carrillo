<div
  class="relative overflow-hidden py-16 md:py-24"
  style="background: linear-gradient(to bottom,
    color-mix(in srgb, var(--brand-300) 10%, white),
    white,
    white
  );"
>
  <!-- soft blobs + “aura” (NEW palette) -->
  <div class="pointer-events-none absolute inset-0">
    <div
      class="absolute -top-28 -left-28 h-[520px] w-[520px] rounded-full blur-3xl"
      style="background: color-mix(in srgb, var(--brand-300) 55%, transparent);"
    ></div>
    <div
      class="absolute -bottom-32 -right-32 h-[560px] w-[560px] rounded-full blur-3xl"
      style="background: color-mix(in srgb, var(--brand-200) 35%, transparent);"
    ></div>
    <div
      class="absolute top-1/3 right-1/4 h-[420px] w-[420px] rounded-full blur-3xl"
      style="background: color-mix(in srgb, var(--brand-500) 14%, transparent);"
    ></div>
    <div
      class="absolute inset-0 opacity-[0.06]"
      style="background-image: radial-gradient(color-mix(in srgb, var(--brand-950) 85%, transparent) 0.6px, transparent 0.6px); background-size: 18px 18px;"
    ></div>
  </div>

  <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative">
    <!-- Breadcrumb -->
    <nav class="text-sm mb-10 max-w-6xl mx-auto" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
      <a routerLink="/" class="transition hover:opacity-80" style="color: var(--brand-600);">Inicio</a>
      <span class="mx-2">/</span>
      <span class="font-semibold" style="color: var(--brand-950);">Reseñas</span>
    </nav>

    <!-- HERO: split editorial -->
    <header class="max-w-6xl mx-auto mb-10 md:mb-14">
      <div class="grid lg:grid-cols-[1.1fr_.9fr] gap-6 lg:gap-10 items-stretch">
        <!-- Left: headline -->
        <div
          class="rounded-3xl backdrop-blur shadow-sm p-8 md:p-10 relative overflow-hidden border"
          style="background: rgba(255,255,255,.82); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
        >
          <div
            class="pointer-events-none absolute -top-24 -right-20 h-64 w-64 rounded-full blur-2xl"
            style="background: color-mix(in srgb, var(--brand-500) 18%, transparent);"
          ></div>
          <div
            class="pointer-events-none absolute -bottom-24 -left-20 h-72 w-72 rounded-full blur-3xl"
            style="background: color-mix(in srgb, var(--brand-300) 28%, transparent);"
          ></div>

          <span
            class="inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-extrabold tracking-wide border"
            style="
              background: color-mix(in srgb, var(--brand-300) 25%, white);
              color: var(--brand-950);
              border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
            "
          >
            <span class="h-2 w-2 rounded-full" style="background: var(--brand-500);"></span>
            Reseñas verificables
          </span>

          <h1 class="mt-5 text-4xl md:text-5xl font-extrabold text-balance leading-[1.06]" style="color: var(--brand-950);">
            Lo que dicen mis pacientes
          </h1>

          <p class="mt-4 text-lg md:text-xl leading-relaxed text-pretty" style="color: color-mix(in srgb, var(--brand-800) 72%, transparent);">
            Opiniones reales tomadas de <strong>Doctoralia</strong> y <strong>Google</strong>.
            Diseñadas para leerse fácil, sin ruido.
          </p>

          <!-- subtle “signature line” -->
          <div
            class="mt-7 h-px w-full"
            style="background: linear-gradient(to right, transparent, color-mix(in srgb, var(--brand-950) 18%, transparent), transparent);"
          ></div>

          <div class="mt-6 flex flex-wrap items-center gap-3 text-sm" style="color: color-mix(in srgb, var(--brand-800) 70%, transparent);">
            <span
              class="inline-flex items-center gap-2 rounded-full border bg-white px-3 py-1"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
            >
              <span class="h-2 w-2 rounded-full" style="background: var(--brand-500);"></span>
              Experiencia premium
            </span>
            <span
              class="inline-flex items-center gap-2 rounded-full border bg-white px-3 py-1"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
            >
              <span class="h-2 w-2 rounded-full" style="background: var(--brand-800);"></span>
              Confianza y claridad
            </span>
            <span
              class="inline-flex items-center gap-2 rounded-full border bg-white px-3 py-1"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
            >
              <span class="h-2 w-2 rounded-full" style="background: var(--brand-300);"></span>
              Atención humana
            </span>
          </div>
        </div>

        <!-- Right: segmented control + summary -->
        <div
          class="rounded-3xl backdrop-blur shadow-sm p-6 md:p-8 relative overflow-hidden border"
          style="background: rgba(255,255,255,.82); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
        >
          <div
            class="pointer-events-none absolute -top-24 -left-24 h-72 w-72 rounded-full blur-3xl"
            style="background: color-mix(in srgb, var(--brand-300) 30%, transparent);"
          ></div>

          <!-- Segmented control -->
          <div
            class="rounded-2xl bg-white p-1 shadow-sm border"
            style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
          >
            <div class="grid grid-cols-2 gap-1">
              <button
                type="button"
                (click)="setTab('doctoralia')"
                class="relative rounded-xl px-4 py-3 text-sm font-extrabold transition border border-transparent"
                [style]="activeTab() === 'doctoralia'
                  ? 'background: var(--brand-950); color: white;'
                  : 'background: transparent; color: var(--brand-950);'"
              >
                <span
                  class="inline-flex items-center justify-center h-6 w-6 rounded-lg mr-2 align-middle"
                  [style]="activeTab() === 'doctoralia'
                    ? 'background: color-mix(in srgb, white 12%, transparent);'
                    : 'background: color-mix(in srgb, var(--brand-300) 22%, white);'"
                >
                  <lucide-icon
                    [img]="iBadgeCheck"
                    class="h-4 w-4"
                    [style]="activeTab() === 'doctoralia' ? 'color: white;' : 'color: var(--brand-800);'"
                  ></lucide-icon>
                </span>
                Doctoralia
              </button>

              <button
                type="button"
                (click)="setTab('google')"
                class="relative rounded-xl px-4 py-3 text-sm font-extrabold transition border border-transparent"
                [style]="activeTab() === 'google'
                  ? 'background: var(--brand-950); color: white;'
                  : 'background: transparent; color: var(--brand-950);'"
              >
                <span
                  class="inline-flex items-center justify-center h-6 w-6 rounded-lg mr-2 align-middle"
                  [style]="activeTab() === 'google'
                    ? 'background: color-mix(in srgb, white 12%, transparent);'
                    : 'background: color-mix(in srgb, var(--brand-500) 18%, white);'"
                >
                  <lucide-icon
                    [img]="iStar"
                    class="h-4 w-4"
                    [style]="activeTab() === 'google' ? 'color: white;' : 'color: var(--brand-500);'"
                  ></lucide-icon>
                </span>
                Google
              </button>
            </div>
          </div>

          <!-- Summary card -->
          <div
            class="mt-5 rounded-2xl border p-5"
            style="
              border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
              background: linear-gradient(to bottom, color-mix(in srgb, var(--brand-300) 18%, white), white);
            "
          >
            @if (activeTab() === 'doctoralia') {
              <div class="flex items-start justify-between gap-3">
                <div>
                  <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                    FUENTE ACTIVA
                  </p>
                  <p class="mt-1 text-lg font-extrabold" style="color: var(--brand-950);">Doctoralia</p>
                  <p class="mt-1 text-sm" style="color: color-mix(in srgb, var(--brand-800) 70%, transparent);">
                    Mostrando <span class="font-extrabold">{{ visibleCount() }}</span> de
                    <span class="font-extrabold">{{ doctoralia().length }}</span> reseñas cargadas.
                  </p>
                </div>

                <div
                  class="h-11 w-11 rounded-2xl grid place-items-center border"
                  style="background: rgba(255,255,255,.75); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
                >
                  <lucide-icon [img]="iQuote" class="h-5 w-5" style="color: var(--brand-500);"></lucide-icon>
                </div>
              </div>
            } @else {
              <div class="flex items-start justify-between gap-3">
                <div>
                  <p class="text-xs font-extrabold tracking-wide" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                    FUENTE ACTIVA
                  </p>
                  <p class="mt-1 text-lg font-extrabold" style="color: var(--brand-950);">Google</p>
                  <p class="mt-1 text-sm" style="color: color-mix(in srgb, var(--brand-800) 70%, transparent);">
                    Mostrando <span class="font-extrabold">{{ visibleCount() }}</span> de
                    <span class="font-extrabold">{{ googleReviews().length }}</span> reseñas cargadas.
                  </p>
                </div>

                <div
                  class="h-11 w-11 rounded-2xl grid place-items-center border"
                  style="background: rgba(255,255,255,.75); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
                >
                  <lucide-icon [img]="iExternal" class="h-5 w-5" style="color: var(--brand-500);"></lucide-icon>
                </div>
              </div>
            }
          </div>
        </div>
      </div>
    </header>

    <!-- PANEL: masonry gallery -->
    <section
      class="max-w-6xl mx-auto rounded-3xl backdrop-blur shadow-sm overflow-hidden border"
      style="background: rgba(255,255,255,.82); border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
    >
      <!-- Head -->
      <div
        class="px-6 md:px-8 py-6 border-b"
        style="
          border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
          background: linear-gradient(to bottom, color-mix(in srgb, var(--brand-300) 18%, white), white);
        "
      >
        <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
          <div>
            <h2 class="text-lg md:text-xl font-extrabold" style="color: var(--brand-950);">Reseñas</h2>
            <p class="text-sm" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
              Lectura tipo “revista”: tarjetas limpias, ordenadas y sin distracciones.
            </p>
          </div>

          <div class="flex items-center gap-2">
            <button
              type="button"
              (click)="resetVisible()"
              class="inline-flex items-center justify-center rounded-2xl bg-white px-4 py-2 text-sm font-extrabold border transition"
              style="
                color: var(--brand-950);
                border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
              "
            >
              Volver al inicio
            </button>

            @if (hasMore()) {
              <button
                type="button"
                (click)="loadMore()"
                class="inline-flex items-center justify-center rounded-2xl px-4 py-2 text-sm font-extrabold text-white transition shadow-sm"
                style="background: var(--brand-950);"
              >
                Cargar más
              </button>
            }
          </div>
        </div>
      </div>

      <!-- Body -->
      <div class="p-6 md:p-8">
        <!-- States -->
        @if (activeTab() === 'doctoralia') {
          @if (loadingDoctoralia()) {
            <div class="columns-1 md:columns-2 xl:columns-3 gap-5 [column-fill:_balance]">
              @for (i of skeletonItems; track trackSkeleton($index, i)) {
                <div class="mb-5 break-inside-avoid">
                  <div class="rounded-3xl border bg-white p-6"
                       style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);">
                    <div class="animate-pulse">
                      <div class="flex items-start gap-3">
                        <div class="h-12 w-12 rounded-2xl" style="background: color-mix(in srgb, var(--brand-200) 55%, white);"></div>
                        <div class="flex-1">
                          <div class="h-4 w-1/2 rounded mb-2" style="background: color-mix(in srgb, var(--brand-200) 55%, white);"></div>
                          <div class="h-3 w-2/3 rounded" style="background: color-mix(in srgb, var(--brand-200) 45%, white);"></div>
                        </div>
                      </div>
                      <div class="h-4 w-40 rounded mt-5" style="background: color-mix(in srgb, var(--brand-200) 45%, white);"></div>
                      <div class="h-3 w-full rounded mt-4" style="background: color-mix(in srgb, var(--brand-200) 40%, white);"></div>
                      <div class="h-3 w-5/6 rounded mt-2" style="background: color-mix(in srgb, var(--brand-200) 40%, white);"></div>
                      <div class="h-3 w-2/3 rounded mt-2" style="background: color-mix(in srgb, var(--brand-200) 40%, white);"></div>
                    </div>
                  </div>
                </div>
              }
            </div>
          } @else if (errorDoctoralia()) {
            <div
              class="rounded-2xl border bg-white/85 backdrop-blur p-6"
              style="border-color: color-mix(in srgb, var(--brand-200) 65%, transparent); color: var(--brand-950);"
            >
              <p class="font-semibold">{{ errorDoctoralia() }}</p>
              <p class="text-sm mt-1" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                Intenta recargar en unos segundos.
              </p>
            </div>
          } @else if (!doctoralia().length) {
            <div
              class="rounded-2xl border bg-white p-6"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: color-mix(in srgb, var(--brand-600) 85%, transparent);"
            >
              Sin reseñas por ahora.
            </div>
          } @else {
            <!-- Masonry reviews -->
            <div class="columns-1 md:columns-2 xl:columns-3 gap-5 [column-fill:_balance]">
              @for (r of visibleDoctoralia(); track trackDoctoralia($index, r)) {
                <article class="mb-5 break-inside-avoid">
                  <div
                    class="group relative overflow-hidden rounded-3xl border bg-white shadow-sm hover:shadow-xl transition"
                    style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
                  >
                    <!-- spotlight overlay -->
                    <div class="pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity">
                      <div class="absolute -top-24 -right-24 h-64 w-64 rounded-full blur-3xl"
                           style="background: color-mix(in srgb, var(--brand-300) 35%, transparent);"></div>
                      <div class="absolute -bottom-24 -left-24 h-72 w-72 rounded-full blur-3xl"
                           style="background: color-mix(in srgb, var(--brand-500) 18%, transparent);"></div>
                    </div>

                    <!-- top accent -->
                    <div
                      class="h-[5px]"
                      style="background: linear-gradient(90deg, var(--brand-950), var(--brand-800), var(--brand-500), var(--brand-300));"
                    ></div>

                    <div class="relative p-6">
                      <div class="flex items-start gap-3">
                        <div
                          class="h-12 w-12 rounded-2xl border grid place-items-center"
                          style="
                            background: color-mix(in srgb, var(--brand-300) 25%, white);
                            border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                          "
                        >
                          <lucide-icon [img]="iQuote" class="h-6 w-6" style="color: var(--brand-500);"></lucide-icon>
                        </div>

                        <div class="min-w-0 flex-1">
                          <div class="flex items-start justify-between gap-3">
                            <div class="min-w-0">
                              <p class="font-extrabold truncate" style="color: var(--brand-950);">{{ r.author }}</p>
                              <p class="text-xs mt-0.5" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                                {{ r.dateText ?? '' }}
                                @if (r.service) { <span class="mx-1">•</span> {{ r.service }} }
                              </p>
                            </div>

                            @if (r.isVerified) {
                              <span
                                class="shrink-0 inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-extrabold border"
                                style="
                                  background: color-mix(in srgb, var(--brand-300) 22%, white);
                                  color: var(--brand-800);
                                  border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                                "
                              >
                                <lucide-icon [img]="iBadgeCheck" class="h-4 w-4"></lucide-icon>
                                Verificada
                              </span>
                            }
                          </div>

                          <div class="mt-3 flex items-center gap-1">
                            @for (filled of starsFilled(r.rating); track $index) {
                              <svg
                                class="h-4 w-4"
                                viewBox="0 0 24 24"
                                aria-hidden="true"
                                [attr.fill]="filled ? 'currentColor' : 'none'"
                                [attr.stroke]="filled ? 'currentColor' : 'currentColor'"
                                stroke-width="2"
                                style="color: var(--brand-500);"
                              >
                                <path d="M12 17.3 6.8 20l1-5.8L3 9.8l5.9-.8L12 3.8l3.1 5.2 5.9.8-4.8 4.4 1 5.8L12 17.3Z" />
                              </svg>
                            }
                            <span class="ml-2 text-xs font-bold" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                              {{ r.rating }}/5
                            </span>
                          </div>
                        </div>
                      </div>

                      <p class="mt-5 leading-relaxed text-pretty" style="color: color-mix(in srgb, var(--brand-800) 78%, transparent);">
                        “{{ r.comment || 'Reseña sin texto.' }}”
                      </p>

                      @if (r.clinic) {
                        <p class="mt-4 text-xs font-semibold" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                          {{ r.clinic }}
                        </p>
                      }

                      @if (r.sourceUrl) {
                        <a
                          class="mt-5 inline-flex items-center justify-between gap-3 w-full rounded-2xl border bg-white px-4 py-3 text-sm font-extrabold transition"
                          style="
                            border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                            color: var(--brand-500);
                          "
                          [href]="r.sourceUrl"
                          target="_blank"
                          rel="noopener"
                        >
                          <span>Ver en Doctoralia</span>
                          <span
                            class="inline-flex h-9 w-9 items-center justify-center rounded-xl"
                            style="background: color-mix(in srgb, var(--brand-500) 12%, white);"
                          >
                            <lucide-icon [img]="iExternal" class="h-4 w-4" style="color: var(--brand-500);"></lucide-icon>
                          </span>
                        </a>
                      }
                    </div>
                  </div>
                </article>
              }
            </div>
          }

        } @else {

          @if (loadingGoogle()) {
            <div class="columns-1 md:columns-2 xl:columns-3 gap-5 [column-fill:_balance]">
              @for (i of skeletonItems; track trackSkeleton($index, i)) {
                <div class="mb-5 break-inside-avoid">
                  <div class="rounded-3xl border bg-white p-6"
                       style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);">
                    <div class="animate-pulse">
                      <div class="flex items-start gap-3">
                        <div class="h-12 w-12 rounded-2xl" style="background: color-mix(in srgb, var(--brand-200) 55%, white);"></div>
                        <div class="flex-1">
                          <div class="h-4 w-1/2 rounded mb-2" style="background: color-mix(in srgb, var(--brand-200) 55%, white);"></div>
                          <div class="h-3 w-2/3 rounded" style="background: color-mix(in srgb, var(--brand-200) 45%, white);"></div>
                        </div>
                      </div>
                      <div class="h-4 w-40 rounded mt-5" style="background: color-mix(in srgb, var(--brand-200) 45%, white);"></div>
                      <div class="h-3 w-full rounded mt-4" style="background: color-mix(in srgb, var(--brand-200) 40%, white);"></div>
                      <div class="h-3 w-5/6 rounded mt-2" style="background: color-mix(in srgb, var(--brand-200) 40%, white);"></div>
                      <div class="h-3 w-2/3 rounded mt-2" style="background: color-mix(in srgb, var(--brand-200) 40%, white);"></div>
                    </div>
                  </div>
                </div>
              }
            </div>
          } @else if (errorGoogle()) {
            <div
              class="rounded-2xl border bg-white/85 backdrop-blur p-6"
              style="border-color: color-mix(in srgb, var(--brand-200) 65%, transparent); color: var(--brand-950);"
            >
              <p class="font-semibold">{{ errorGoogle() }}</p>
              <p class="text-sm mt-1" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                Puede ser temporal (rate limit / API).
              </p>
            </div>
          } @else if (!googleReviews().length) {
            <div
              class="rounded-2xl border bg-white p-6"
              style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent); color: color-mix(in srgb, var(--brand-600) 85%, transparent);"
            >
              Sin reseñas por ahora.
            </div>
          } @else {

            <div class="columns-1 md:columns-2 xl:columns-3 gap-5 [column-fill:_balance]">
              @for (r of visibleGoogle(); track trackGoogle($index, r)) {
                <article class="mb-5 break-inside-avoid">
                  <div
                    class="group relative overflow-hidden rounded-3xl border bg-white shadow-sm hover:shadow-xl transition"
                    style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
                  >
                    <div class="pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity">
                      <div class="absolute -top-24 -right-24 h-64 w-64 rounded-full blur-3xl"
                           style="background: color-mix(in srgb, var(--brand-500) 20%, transparent);"></div>
                      <div class="absolute -bottom-24 -left-24 h-72 w-72 rounded-full blur-3xl"
                           style="background: color-mix(in srgb, var(--brand-300) 24%, transparent);"></div>
                    </div>

                    <div
                      class="h-[5px]"
                      style="background: linear-gradient(90deg, var(--brand-800), var(--brand-500), var(--brand-300), var(--brand-200));"
                    ></div>

                    <div class="relative p-6">
                      <div class="flex items-start gap-3">
                        @if (r.authorPhoto) {
                          <img
                            class="h-12 w-12 rounded-2xl object-cover border"
                            style="border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);"
                            [src]="r.authorPhoto"
                            [alt]="r.author"
                            loading="lazy"
                            decoding="async"
                            referrerpolicy="no-referrer"
                          />
                        } @else {
                          <div
                            class="h-12 w-12 rounded-2xl border grid place-items-center"
                            style="
                              background: color-mix(in srgb, var(--brand-300) 25%, white);
                              border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                            "
                          >
                            <lucide-icon [img]="iQuote" class="h-6 w-6" style="color: var(--brand-500);"></lucide-icon>
                          </div>
                        }

                        <div class="min-w-0 flex-1">
                          <p class="font-extrabold truncate" style="color: var(--brand-950);">{{ r.author }}</p>
                          <p class="text-xs mt-0.5" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                            {{ r.relativeTime ?? '' }}
                          </p>

                          <div class="mt-3 flex items-center gap-1">
                            @for (filled of starsFilled(r.rating); track $index) {
                              <svg
                                class="h-4 w-4"
                                viewBox="0 0 24 24"
                                aria-hidden="true"
                                [attr.fill]="filled ? 'currentColor' : 'none'"
                                [attr.stroke]="'currentColor'"
                                stroke-width="2"
                                style="color: var(--brand-500);"
                              >
                                <path d="M12 17.3 6.8 20l1-5.8L3 9.8l5.9-.8L12 3.8l3.1 5.2 5.9.8-4.8 4.4 1 5.8L12 17.3Z" />
                              </svg>
                            }
                            <span class="ml-2 text-xs font-bold" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
                              {{ r.rating }}/5
                            </span>
                          </div>
                        </div>
                      </div>

                      <p class="mt-5 leading-relaxed text-pretty" style="color: color-mix(in srgb, var(--brand-800) 78%, transparent);">
                        “{{ r.text || 'Reseña sin texto.' }}”
                      </p>

                      @if (r.googleMapsUri) {
                        <a
                          class="mt-5 inline-flex items-center justify-between gap-3 w-full rounded-2xl border bg-white px-4 py-3 text-sm font-extrabold transition"
                          style="
                            border-color: color-mix(in srgb, var(--brand-200) 55%, transparent);
                            color: var(--brand-500);
                          "
                          [href]="r.googleMapsUri"
                          target="_blank"
                          rel="noopener"
                        >
                          <span>Ver en Google Maps</span>
                          <span
                            class="inline-flex h-9 w-9 items-center justify-center rounded-xl"
                            style="background: color-mix(in srgb, var(--brand-500) 12%, white);"
                          >
                            <lucide-icon [img]="iExternal" class="h-4 w-4" style="color: var(--brand-500);"></lucide-icon>
                          </span>
                        </a>
                      }
                    </div>
                  </div>
                </article>
              }
            </div>

          }
        }

        <!-- Load more bottom -->
        <div class="mt-8 flex flex-col items-center gap-3">
          @if (hasMore()) {
            <button
              type="button"
              (click)="loadMore()"
              class="inline-flex items-center justify-center rounded-2xl px-6 py-3 text-white font-extrabold shadow-sm transition"
              style="background: var(--brand-950);"
            >
              Cargar 15 más
            </button>
            <p class="text-xs" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
              Mostrando {{ visibleCount() }} de {{ totalActive() }} reseñas cargadas.
            </p>
          } @else {
            <p class="text-sm" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
              Ya estás viendo todas las reseñas disponibles por ahora.
            </p>
          }
        </div>
      </div>
    </section>

    <footer class="max-w-2xl mx-auto text-center mt-10">
      <p class="text-sm leading-relaxed" style="color: color-mix(in srgb, var(--brand-600) 85%, transparent);">
        <strong style="color: var(--brand-950);">Nota:</strong> Los resultados pueden variar según cada caso individual.
        Esta información no sustituye una valoración médica profesional.
      </p>
    </footer>
  </div>
</div>
